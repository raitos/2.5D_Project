<html>
<head>
  <title>Evernote Export</title>
  <basefont face="メイリオ" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (ja-JP, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: メイリオ;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="64327"/>

<div>
<span><div><span style="font-size: 48px;"><b>ユニティちゃんトゥーンシェーダーマニュアル</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div style="text-align: right"><span style="font-size: 16px;"><b>2016/09/06 Nobuyuki Kobayashi (Unity Technologies Japan)</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 24px;"><br/></span></b></div><div><b><span style="font-size: 24px;">【ユニティちゃんトゥーンシェーダーとは？】</span></b></div><div><span style="font-size: 16px;">「ユニティちゃんトゥーンシェーダー」は、セル風3DCGアニメーションの制作現場での要望に応えるような形で設計された、映像志向のトゥーンシェーダーです。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">各設定は、「トゥーンシェーダーとしての綺麗さ」を最優先で設計されていますので、ゲーム等に使用する場合には、各パーツのライトカリング等の設定を必要に応じて見直してみてもよいでしょう。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">なお</span><span style="font-size: 16px;">セル風</span><span style="font-size: 16px;">3DCGアニメーションの制作現場向けの設計になっていますので、いわゆる「影」は色設計担当者が作成しやすいような「影色設定」を使う方式であり、かつ各パーツの形状（フォルム）を強調する「影」や、キャラクターのデザイン上、光源の位置や強さとは関係なく、必ず必要となる「影」が出しやすいように設計されています。</span></div><div><span style="font-size: 16px;">一方、</span><span style="font-size: 16px;">セル風</span><span style="font-size: 16px;">3DCGアニメーションではほぼ使用されない、「セルフシャドウ」には対応していませんので、その点はご留意ください。</span></div><div><b><span style="font-size: 24px;"><br/></span></b></div><div><span style="font-size: 24px;"><b>【開発環境】</b></span></div><div><span style="font-size: 16px;">ユニティちゃんトゥーンシェーダーは、Unity5.3+ShaderForge v1.27で開発されています。</span></div><div><span style="font-size: 16px;">シェーダーノードを開くためには、ShaderForge（<a href="https://www.assetstore.unity3d.com/en/#!/content/14147">https://www.assetstore.unity3d.com/en/#!/content/14147</a>）が必要です。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 24px;">【ターゲット環境】</span></b></div><div><span style="font-size: 16px;">ShaderForge側で以下のように設定してあります。必要に応じて変更してください。</span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0802-04_04.png" type="image/png" style="height: auto;"/><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【シェーダーの特徴】</b></span></div><div><span style="font-size: 16px;">ユニティちゃんトゥーンシェーダーは以下のような特徴をもっています。</span></div><ul><li><span style="font-size: 16px;">アウトラインの入り抜き調整は、テクスチャで指定可能</span></li><li><span style="font-size: 16px;">必ず影にしたい場所をテクスチャで指定可能</span></li><li><span style="font-size: 16px;">ノーマル色と影色の混合部のぼけ足を調整可能</span></li><li><span style="font-size: 16px;">ライトの位置を変えずに影色の支配域を変更可能</span></li></ul><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0713-06_01.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【サンプルシーン】</b></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-14_03.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【プロジェクトの初期設定】</b></span></div><div><span style="font-size: 16px;">File&gt;Build Settings&gt;Olayer Settings... より</span></div><div><span style="font-size: 16px;">Rendering Path⇒Forward</span></div><div><span style="font-size: 16px;">Color Space⇒Linearを推奨</span></div><div><span style="font-size: 16px;">（※もしプラットフォームの制約でGammaスペースを使う時には、LightingウィンドウよりAmbient Colorを調整することでカラー調整をすること）</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-12_07.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">パーツごとにディレクショナルライトを使い分ける（ライトリンキングをする）場合には、必要な数のレイヤーを準備すること。</span></div><div><span style="font-size: 16px;">以下にライトリンキングの例を示す。</span></div><div><span style="font-size: 16px;">この例では、Directional Light_MainLightは、レイヤーMainLightに属するメッシュしか照らさなくなる。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-12_05.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【シェーダーノードを開く】</b></span></div><div><span style="font-size: 16px;">ShaderForgeがインポートされている場合には、Assets/Toon内のToonShadr.shaderをProjectウィンドウで選択し、「Open in Shader Forge」ボタンをクリックすることで、シェーダーノードが開く。</span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-15_03.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">トゥーンシェーダーには以下の３種類があります。基本操作は同じです。</span></div><div><br/></div><ul><li><span style="font-size: 16px;">ToonShader.shader</span></li><li><span style="font-size: 16px;">ToonShader_rim.shader（リムライト追加版）</span></li><li><span style="font-size: 16px;">ToonShader_rim_matcap.shader（リムライト＋MatCap追加版）<br/><br/></span></li></ul><div><span style="font-size: 24px;"><b>【トゥーンシェーダーの各プロパティ解説】</b></span></div><div><b><span style="font-size: 24px;"><img src="UnityChanToonShaderManual_files/0906-11_02.png" type="image/png" style="height: auto;"/><br/></span></b></div><div><b><span style="font-size: 16px;">トゥーンシェーダー共通プロパティ</span></b></div><div style="margin-left:40px;"><span style="font-size: 16px;">１：BaseTexutre：通常色のテクスチャを設定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">２：Mix_BaseTexture：通常色の支配範囲を指定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">３：KageTexture：影色のテクスチャを設定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">４：Mix_KageTexture：陰色の支配範囲を指定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">５：setKage：必ず影を落としたい部分を黒で指定するサンプラーマップを設定（黒100％で陰色100％になる）</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">６：Normal Map：ノーマルマップを設定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">７：isKage_Normal：ノーマルマップが設定されている場合、ノーマルマップを影モデルに反映させるか指定（チェックありで反映させる）</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">８：Outline_sampler：アウトラインの入り抜きを指定するサンプラーマップを設定（黒でアウトラインなし、白で太さ最大）</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">９：Outline_Width：アウトラインの幅を指定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">１０：Line_Color：アウトラインのカラーを指定（通常色テクスチャとミックスされる）</span></div><div style="margin-left:40px;"><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 16px;">リムライトの追加プロパティ</span></b></div><div style="margin-left:40px;"><span style="font-size: 16px;">１１：Rim_Sharpness：リムライトのシャープネス設定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">１２：Rim_Color：リムライトのカラー指定（HDR対応）</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">１３：isRim_Normal：リムライトをノーマルマップに反映させるか指定</span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 16px;">Matcapハイライトの追加プロパティ</span></b></div><div style="margin-left:40px;"><span style="font-size: 16px;">１４：Matcap：Matcapの設定</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">１５：Tweak_UV：MatcapのUV微調整</span></div><div style="margin-left:40px;"><span style="font-size: 16px;">１６：isMatcap_Normal：Matcapをノーマルマップに反映させるか指定</span></div><div style="margin-left:40px;"><br/></div><div><b><span style="font-size: 21px;">【通常色と影色の混合部のぼけ足の調整の仕方】</span></b></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-16_03.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-16_01.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-16_02.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">※ちなみに「Mix_BaseTextureの値＋Mix_KageTextureの値＝１」となるような値を入れると影モデルが完全に反転するので、それを境に各スライダーを動かすことで、ランプシェーダーに近いパッキリとノーマル色と影色が分かれる値を探ることをができる。それをうまく使うと影の反転もできる。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【アウトラインサンプラーに使用するテクスチャについて】</b></span></div><div><span style="font-size: 19px;">黒でラインなし、白でラインの幅が100%になります。</span></div><div><span style="font-size: 19px;">適宜アウトラインサンプラーを設定することで、アウトラインに入り抜き（強弱）が発生します。</span></div><div><span style="font-size: 19px;">アウトラインサンプラーは、キャラごとにある程度パーツのUVを共通化することで、汎用的に入り抜きの制御ができるようになります。</span></div><div><b><span style="font-size: 24px;"><img src="UnityChanToonShaderManual_files/0906-18_01.png" type="image/png"/><br/></span></b></div><div><br/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【必ず影を落としたい部分の指定するsetKageテクスチャについて】</b></span></div><div><span style="font-size: 19px;">ライティングと関係なく影を落としたい部分をsetKageテクスチャで指定できます。</span></div><div><span style="font-size: 19px;">各シーンごとの特殊な影や、演出上追加したい影などがある場合、ライティングに加えて追加できます。</span></div><div><br/></div><div><img src="UnityChanToonShaderManual_files/0906-18_03.png" type="image/png"/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">※3Dペインターを使って、影位置を指定してもよい。</span></div><div><br/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【Mesh_Shadowsグループの設定について】</b></span></div><div><span style="font-size: 16px;">トゥーンシェーダー用のディレクショナルライト以外に、メインライトの影を落とすためにMesh_Shadowsグループを設定します。</span></div><div><span style="font-size: 16px;">これはメッシュグループMesh_SD_unitychanをデュプリケートし、Skinned Mesh Renderer内のCast ShadowsをShadows Onlyに設定したもの。</span></div><div><span style="font-size: 16px;">（ライトリンキングについてもご確認ください）</span></div><div><span style="font-size: 16px;">影を落とす必要がないならば設定しなくてもかまいません。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-16_14.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【AmbientColorを使ったカラー調整】</b></span></div><div><span style="font-size: 16px;">トゥーンシェーダーは、LightingウィンドウのAmbient Source⇒Color、Ambient Colorの影響を受けます。</span></div><div><span style="font-size: 16px;">AmbientColorを使って、シーン全体のカラーにトゥーンシェーダーを馴染ませたり、リニアスペースカラーとガンマスペースカラーのカラーイメージの違いをある程度吸収したりすることができます。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 24px;"><b>【イメージエフェクト（ポストエフェクト）について】</b></span></div><div><span style="font-size: 16px;">イメージエフェクト（ポストエフェクト）として、Cinematic Image Effects（<a href="https://www.assetstore.unity3d.com/en/#!/content/51515">https://www.assetstore.unity3d.com/en/#!/content/51515</a>）を使用しています。</span></div><div><span style="font-size: 16px;">イメージエフェクトは、Main Cameraにアタッチされています。順番が重要なので、下を参考にしてください。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/0801-17_07.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 24px;">【映像（プリレンダー）での使用】</span></b></div><div><span style="font-size: 16px;">プリレンダーで使用する場合には、イメージエフェクト側につけているAnti Aliasingは外して、フレームキャプチャで4K出力をしたものを使用サイズに縮小して使うほうが綺麗な可能性が高いです（事実上のスーパーサンプリング）。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">フレームキャプチャは以下で提供されています。</span></div><div><span style="font-size: 16px;"><a href="https://github.com/unity3d-jp/FrameCapturer">https://github.com/unity3d-jp/FrameCapturer</a></span></div><div><span style="font-size: 16px;">フレームキャプチャの出力結果は、NUKEやAfterEffectsで利用できます。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">他、Alembic Importer/Exporterがあるので、映像用にはこちらも使うとよいでしょう。</span></div><div><span style="font-size: 16px;"><a href="https://github.com/unity3d-jp/AlembicImporter">https://github.com/unity3d-jp/AlembicImporter</a></span></div><div><br/></div><div><b><span style="font-size: 24px;"><br/></span></b></div><div><b><span style="font-size: 24px;">【WebGLでの使用】</span></b></div><div><span style="font-size: 16px;">ガンマカラー設定で使用することで、WebGL上で動くことを確認しています。</span></div><div><span style="font-size: 16px;">WebGL上で使用する場合、ポストエフェクトの多くが使えませんのでご注意ください。</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 24px;">【ライセンスについて】</span></b></div><div><span style="font-size: 16px;">「ユニティちゃんトゥーンシェーダー」は、UCL2.0（ユニティちゃんライセンス2.0）で提供されます。</span></div><div><span style="font-size: 16px;">ユニティちゃんライセンスについては、以下を参照してください。</span></div><div><span style="font-size: 16px;"><a href="http://unity-chan.com/contents/guideline/">http://unity-chan.com/contents/guideline/</a></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="UnityChanToonShaderManual_files/Light_Silhouette.jpg" type="image/jpeg" style="height: auto;"/><br/></span></div><div><br/></div><div><span style="font-size: 16px;"><br/></span></div><div><br/></div></span>
</div></body></html> 